# Chapter9. 구간 질의
배열에 대한 구간 질의를 효율적으로 처리하는 자료구조를 살펴보자.  
예로는 구간 합 질의, 구간 최소 질의가 있다.  

## 9.1 정적 배열에 대한 질의
배열이 정적인 경우, 즉 질의 사이에 배열의 원소가 절대로 변하지 않는 경우를 살펴본다.  
이 경우에는 배열에 대한 전처리만 잘 수행해도 구간 질의에 효율적으로 답 할 수 있다.  
먼저, 누적 합 배열을 이용하여 구간 질의를 간단하게 처리하는 방법을 살펴본다.  

### 9.1.1 합 질의
구간 합 질의 `sum(a,b)`는 배열에서 위치가 구간 [a,b]에 속하는 원소들의 합을 나타낸다.  
만약 누적 합 배열을 미리 구해놓는다면 `PrefixSum[b]-PrefixSum[a-1]`로 쉽게 구간 합 질의를 해결 할 수 있다.  
누적합 배열의 각 원소는 주어진 배열에서 그 위치까지의 원소들의 합이다. 즉 위치 k의 원소는 `sum(0,k)`이다.  

누적 합 배열은 `O(n)`시간에 구할 수 있으며 `sum(a,b)`는 `O(1)`시간에 구할 수 있다.  

#### 고차원에 대한 일반화
책에 있는 그림을 표현하고 싶지만 마땅치 않아 그냥 글로 표현한다.  
임의의 직사각형 크기의 범위의 부분 합을 구하기 위해서는 다음 공식으로 나타낼 수 있다.  
`S(A)-S(B)-S(C)+S(D)`  
> 이 수식이 어떻게 유도된지는 잘 모르겠다.

### 9.1.2 최소 질의
구간 최소 질의 `min(a,b)`는 배열에서 위치가 구간 [a,b]에 속하는 원소들의 합을 나타낸다.  
이 책에서 소개하는 기법은 전처리를 `O(n log n)`시간에 해결하고 `O(1)`시간에 최소 질의를 해결한느 알고리즘이다. 
이 기법은 Bender와 Farach-colton이 만든 것으로 **희소 테이블** 이라는 이름으로 불린다.  
