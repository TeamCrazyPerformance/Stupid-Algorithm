# Chapter12. 고급 그래프 알고리즘
고-오급 알고리즘을 살펴보자.  

## 12.1 그래프의 강 결합성
방향 그래프의 모든 노드에서 다른 모든 노드로 가는 경로가 있는 경우에는 **강 결합 그래프**라고 부른다.  
즉, 어떤 노드 x에서 어떤 노드 y로 가는 경로가 무조건 존재하는 경우이다.  
**강 결합 그래프**보다 하위 개념인 **강 결합 컴포넌트** 는 모든 방향 그래프에 존재하는데, 그래프 전체가 아니라 일부분에 강 결합 그래프가 보이면 강 결합 컴포넌트라고 부른다.  
> 강 결합 컴포넌트는 1개의 노드만 가지고 있을 수도 있다.  

### 12.1.1 코사라주 알고리즘
그래프에서 강 결합 컴포넌트를 찾는 방법이다.  
우선 두 번의 DFS를 진행하는데 첫 번째 탐색에서는 그래프의 구조에 따라 노드 리스트 생성, 두 번째 탐색에서는 강 결합 컴포넌트를 구한다.  
두 번째 탐색에서는 원본 방향 그래프의 간선 방향을 역으로 배치한다. 이 후, 생성된 노드 리스트의 가장 끝 부분부터 그래프 탐색을 하면서 노드 리스트에서 제거한다.  
이 때, 그래프 탐색 중, 노드 리스트에 없다면 하나의 강 결합 컴포넌트가 생성된 것으로 간주한다.  

### 12.1.2 2-SAT 문제
![논리식](https://blogfiles.pstatic.net/20160902_151/kks227_1472760030282Yhuqa_PNG/%C1%A6%B8%F1_%BE%F8%C0%BD.png?type=w3)
위 식을 가지고 푸는 문제이다.  
식을 간단히 보자면 해당 식이 true가 되려면 `x1=x2=false, x3=true`가 되면 충족한다.  

![논리식](https://blogfiles.pstatic.net/20160902_191/kks227_1472760132952se6a4_PNG/2.png?type=w3)
하지만 이 식은 어떤 값을 넣더라도 true를 만들 수가 없다.  

그렇다면 왜 이게 그래프 이론에서 나오느냐?  
간단하게 말하자면 `x1 => not x1 이면서 not x1 => x1일 수 없다.` 라는 모순을 그래프에서 찾을 수 있기 때문이다.  
다시 말해서 강 결합 그래프 혹은 강 결합 컴포넌트에 있는 노드 집합들 중에서는 x(i)와 not x(i)가 공존 할 수 없다는 이야기이다.  
즉, 논리식을 잘 짜놓고 방향 그래프를 그린다면 이 논리식에 해답이 존재하는지, 존재하지 않은지 확인할 수 있다.  

이 2-sat문제는 두 개의 선택지가 있고 둘 중 최소한 하나는 만족해야한다는 조건이 있는 문제에서 활용이 가능하다.  
> 사실 문제에서 2-SAT을 사용해야한다고 생각도 못할 것 같다.  

## 12.2 완전 경로
개념  
1. 오일러 경로 : 모든 간선을 정확히 한 번씩 지나가는 경로  
2. 해밀턴 경로 : 모든 노드를 정확히 한 번씩 방문하는 경로  
유사한 개념이지만 조금만 생각하면 두 경로는 명확하게 다르다는 것을 알 수 있을 것이다.  

### 12.2.1 오일러 경로
그래프에 존재하는 모든 간선을 한 번씩만 지나가는 경로이다. 이 때, 시작과 끝 지점이 동일한 노드라면 **오일러 회로(Eulerain circuit)**라고 한다.  
오일러 경로와 회로가 존재하는지는 노드의 차수에 따라 결정되는데 아래의 제약 조건을 만족하면 된다.  
- 모든 간선이 같은 연결 컴포넌트에 속하고
1. 모든 노드의 차수가 짝수이거나 --> 오일러 경로는 오일러 회로가 된다.  
2. 정확히 두 노드의 차수가 홀수이고, 다른 모든 노드의 차수는 짝수이다. --> 차수가 홀수인 노드가 양 끝 점이 되는 오일러 경로이다.  

위의 경우에는 무방향 그래프일 경우에 사용이 가능하고, 방향성이 있는 그래프에는 노드의 진입 차수와 진출 차수를 확인하면 된다. 
- 모든 간선이 같은 강 결합 컴포넌트에 속하고  
1. 모든 노드의 진입 차수와 진출 차수가 같거나 --> 오일러 경로는 오일러 회로가 된다.  
2. 한 노드의 진입 차수가 진출 차수보다 1크고, 다른 한 노드의 진출 차수가 진입 차수보다 1크며, 나머지 노드는 진입 차수와 진출 차수가 같다. --> 진출 차수가 큰 노드에서 시작해서 진입 차수가 큰 노드에서 끝나는 오일러 경로를 이룬다.  

#### 경로 찾기
히어홀처 알고리즘은 오일러 회로를 찾는 효율적인 알고리즘이다.  
이 알고리즘은 오일러 회로가 존재한다는 가정을 가지고 진행하는 알고리즘으로, 만약 오일러 회로가 없는 그래프에 적용하면 답을 찾지 못한다.  

먼저, 노드 하나를 지닌 회로에서 진행을 한다. 
회로에 있는 노드 중 회로에 포함되지 않은 진출 간선이 있는 노드에 대해서 부분 회로를 찾는다.  
찾았다면 해당 부분회로를 원래 회로에 병합시킨다.  
> 말이 쉽지, 어떻게 첫 노드를 선정하고, 해당 노드에서부터 자기 자신으로 들어오는 경로를 어떻게 찾아야하는지도.. 

### 12.2.2 해밀턴 경로
그래프의 모든 노드를 정확히 한 번씩만 방문하는 경로이다.  
시작 노드와 끝 노드가 같은 경우에는  **해밀턴 회로(Hamiltonian Circuit)**라고 한다.  
해밀턴 경로와 관련된 문제는 NP-하드로 일반적인 방법은 알려지지 않았다.  
특정한 경우에는 해밀턴 경로가 있음을 보장하긴한다.  
> 완전 그래프에는 해밀턴 경로가 존재한다.  

해밀턴 경로를 찾는 가장 간단한 방법은 퇴각 검색을 이용하여 경로를 구성하는 것이다. 
이 경우에는 모든 경우를 찾아야하기 때문에 `O(n!)`의 시간이 걸리지만 동적 계획법을 사용한다면 `O((2^n)*(n^2))`시간에 찾을 수도 있다.  
> 에잉 몰라.

### 12.2.3 응용
#### 드 브루인 수열(De Bruijn sequence)
문자열의 일종으로, 글자의 종류가 k개일 때 만들 수 있는 길이가 n인 모든 문자열을 정확히 한 번씩 포함하는 수열이다.  
즉, 문자열이 있으면 해당 문자열 안에 k개의 글자로 길이가 n인 문자열을 모두 찾을 수 있는 것이다.  
길이는 k^n+n-1이 되며, 오일러 경로로 수열을 찾을 수 있다.  
> 복잡하다.  

#### 나이트 투어
n*n 체스판에서 나이트가 체스판의 모든 칸을 정확히 한 번씩 방문하는 경로이다.  
이 때, 원래 위치로 돌아온다면 닫힌 나이트 투어, 그렇지 않으면 열린 나이트 투어라고 한다.  

체스판의 각 칸이 노드가 되고, 이동할 수 있는 경로를 간선으로 연결한 그래프라 생각을 했을 경우, 해밀턴 경로와 대응이 된다.  
다만 탐색이 퇴각 검색을 이용해야하므로 시간이 오래걸린다.  

다른 알고리즘으로 바른스도로프 규칙이 있는데, 나이트가 움직일 수 있는 여러 칸 중, 옮겨진 칸에서 이동할 수 있는 경우가 가장 작은 곳으로 이동하는 것이다.  
> 신기하군. 나중에 풀어봐야겠다.  

> 작성중
